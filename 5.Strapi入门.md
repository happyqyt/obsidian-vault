# ä»‹ç»
Strapi æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºæ— ç•Œé¢ CMSã€‚æ‰€è°“æ— ç•Œé¢â€”â€”å³ Headlessï¼Œä¹Ÿå«æ— å¤´ â€”â€”æ˜¯æŒ‡è¿™ç§ CMS åªæä¾›ç»“æ„åŒ–çš„æ•°æ®å’Œæ¥å£ï¼Œåªå…³æ³¨å†…å®¹çš„åˆ›å»ºå’Œç®¡ç†ï¼Œè€Œä¸å¤„ç†å‘ˆç°å†…å®¹çš„å‰ç«¯ç•Œé¢ã€‚ç”¨æˆ·åœ¨å¿«é€Ÿæ„å»ºè‡ªå·±æ‰€éœ€çš„APIå¹¶æ‹¿åˆ°æ•°æ®åï¼Œå¯ä»¥ç”¨ä»»ä½•æ¡†æ¶æˆ–æ–¹æ³•å°†æ•°æ®æ¸²æŸ“æˆç•Œé¢ï¼Œå¯ä»¥è½»æ¾é›†æˆåˆ°ä»»ä½•ç°ä»£Webæˆ–ç§»åŠ¨åº”ç”¨ä¸­ï¼Œæ— è®ºä½ æ˜¯ç”¨Reactã€Vueè¿˜æ˜¯Angularï¼Œéƒ½èƒ½æ— ç¼å¯¹æ¥ã€‚
> ä¼ ç»Ÿçš„CMSé€šå¸¸å°†å†…å®¹ç®¡ç†å’Œå±•ç¤ºè€¦åˆåœ¨ä¸€èµ·ï¼Œå³å†…å®¹çš„åˆ›å»ºã€ç¼–è¾‘å’Œå±•ç¤ºéƒ½ä¾èµ–äºç‰¹å®šçš„å‰ç«¯ç•Œé¢å’Œæ¨¡æ¿ã€‚è€Œæ— å¤´CMSåˆ™å°†å†…å®¹ä¸å‰ç«¯é€»è¾‘å®Œå…¨è§£è€¦ï¼Œæä¾›äº†ä¸€ç§æ›´åŠ çµæ´»çš„æ–¹å¼æ¥å¤„ç†å†…å®¹ã€‚

ä¼˜ç‚¹ï¼š
- **ä¿æŒå¯¹æ•°æ®çš„æ§åˆ¶**ã€‚ä½¿ç”¨Strapiï¼Œå¯ä»¥çŸ¥é“æ•°æ®çš„å­˜å‚¨ä½ç½®ï¼Œå¹¶ä¸”å§‹ç»ˆå¯ä»¥å®Œå…¨æ§åˆ¶ã€‚
- **è‡ªæ‰˜ç®¡**ã€‚å¯ä»¥æŒ‰ç…§è‡ªå·±çš„æ–¹å¼æ‰˜ç®¡å’Œæ‰©å±•Strapié¡¹ç›®ã€‚å¯ä»¥é€‰æ‹©æ‰€éœ€çš„ä»»ä½•æ‰˜ç®¡å¹³å°ï¼šAWSï¼ŒNetlifyï¼ŒHerokuï¼ŒVPSæˆ–ä¸“ç”¨æœåŠ¡å™¨ã€‚æ‚¨å¯ä»¥éšå¢é•¿è€Œæ‰©å±•ï¼Œ100ï¼…ç‹¬ç«‹ã€‚
- **å¯ä»¥é€‰æ‹©è‡ªå·±å–œæ¬¢çš„æ•°æ®åº“**ã€‚Strapié€‚ç”¨äºSQLå’ŒNoSQLæ•°æ®åº“ï¼šMongoDBï¼ŒPostgreSQLï¼ŒMySQLï¼ŒMariaDBå’ŒSQLiteã€‚
- **å¯å®šåˆ¶çš„**ã€‚é€šè¿‡å®Œå…¨è‡ªå®šä¹‰APIï¼Œè·¯ç”±æˆ–æ’ä»¶æ¥å®Œå…¨æ»¡è¶³éœ€æ±‚ï¼Œä»è€Œå¿«é€Ÿæ„å»ºé€»è¾‘ã€‚
- **å†…å®¹ç®¡ç†ç•Œé¢**ã€‚Strapi æä¾›äº†ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„ç®¡ç†ç•Œé¢ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥è½»æ¾åœ°åˆ›å»ºã€ç¼–è¾‘å’Œå‘å¸ƒå†…å®¹ã€‚
- **å¯æ‰©å±•æ€§**ã€‚Strapi å…·æœ‰é«˜åº¦çš„å¯æ‰©å±•æ€§ï¼Œå¯ä»¥é€šè¿‡æ’ä»¶å’Œè‡ªå®šä¹‰æ¨¡å—ã€æ’ä»¶æ¥æ‰©å±•å…¶åŠŸèƒ½ã€‚

é€‚ç”¨åœºæ™¯ï¼š
* **å¤šå¹³å°å†…å®¹åˆ†å‘**ï¼šå°†å†…å®¹åˆ†å‘åˆ°ä¸åŒwebã€h5ç­‰ä¸åŒå¹³å°
* **å®šåˆ¶åŒ– CMS éœ€æ±‚**ï¼šé€šè¿‡æ’ä»¶ç­‰æ‰©å±•æ€§é«˜åº¦å®šåˆ¶
* **å¿«é€Ÿå¼€å‘API**ï¼šç®¡ç†ç•Œé¢èƒ½å¤Ÿå¤§å¤§åŠ å¿«å¼€å‘é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯MVPï¼ˆæœ€å°å¯è¡Œäº§å“ï¼‰é˜¶æ®µ


# å®‰è£…ç¯å¢ƒ

![æˆªå±2024-03-29 17.52.18.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/304e064919a14c3ba557fd77df5d4537~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=428&h=118&s=20227&e=png&b=fefefe)

# å®‰è£…&è¿è¡Œ
`yarn create strapi-app my-strapi --quickstart`
> Strapié»˜è®¤ä½¿ç”¨ä¸€ä¸ªSQLiteæ•°æ®åº“ã€‚è¦ä½¿ç”¨å…¶ä»–æ•°æ®åº“æ¥è®¾ç½®Strapiï¼Œä¾‹å¦‚MongoDBæˆ–PostgreSQLï¼Œè¯·ä»ä¸Šè¿°å‘½ä»¤ä¸­åˆ é™¤`--quickstart`Â æ ‡å¿—ã€‚

###### å¯åŠ¨å¼€å‘æ¨¡å¼
`yarn develop`
###### ç”Ÿäº§æ¨¡å¼
`yarn start`
###### é‡æ–°æ„å»º
`yarn build`

> å¯ä»¥æ‰“å¼€`config/server.js`æ–‡ä»¶,ä¿®æ”¹å¯åŠ¨ç«¯å£å·

# ä¿®æ”¹ strapi ç®¡ç†ç•Œé¢ä¸ºä¸­æ–‡
step1. åœ¨é¡¹ç›®çš„`./src/admin/`ç›®å½•ä¸‹æ‹·è´`app.example.js`æ–‡ä»¶å¹¶é‡å‘½åä¸º`app.js`ï¼Œå¹¶å¯¹è¿™ä¸¤è¡Œ
```
'zh-Hans',
'zh',
```
å–æ¶ˆæ³¨é‡Šï¼Œä¿å­˜ã€‚

step2. è¿è¡Œ`yarn build && yarn start`

step3. åœ¨ç®¡ç†ç•Œé¢ä¸­ç‚¹å‡»ï¼šå·¦ä¸‹è§’çš„ç”¨æˆ·å -> Profile -> Experience -> Interface languageé‡Œå¯è¿›è¡Œå½“å‰è´¦å·çš„ç•Œé¢è¯­è¨€è®¾ç½®ï¼Œä¿å­˜å³å¯ã€‚

![æˆªå±2024-04-09 16.59.06.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7df35c70c0374f72942535e4640a197f~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2052&h=1144&s=154740&e=png&b=ffffff)

# å¿«é€Ÿå¼€å‘ä¸€å¥—CRUDæ¥å£
## ğŸ“å»ºè¡¨&æ’å…¥æ•°æ®
ç‚¹å‡»`Content-Type Builder`ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»æœ‰ä¸€ä¸ª`User`çš„é›†åˆç±»å‹ï¼Œè¿™ä¸ªæ˜¯strapiè‡ªå·±æä¾›çš„ï¼Œæˆ‘ä»¬å½“å‰ç™»å½•çš„ç”¨æˆ·çš„æ•°æ®å°±å­˜å‚¨åœ¨è¿™ä¸ªæ¨¡å‹å½“ä¸­ã€‚

è®©æˆ‘ä»¬å»ºä¸€ä¸ª`Pages`é›†åˆï¼ŒåŒ…å«ä¸€ä¸ªåç§°å’Œæè¿°å­—æ®µã€‚ï¼ˆæ³¨æ„ï¼š`åˆ›å»ºä¸€ä¸ªæ–°çš„Content Type`æŒ‰é’®éœ€è¦åœ¨å¼€å‘æ¨¡å¼ä¸‹æ‰å¯è§ï¼‰
![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4d7fc84e17184ac98c1338f5f979332a~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1458&h=734&s=87488&e=png&b=e4e4e9)
>ã€æ³¨æ„ã€‘`é«˜çº§è®¾ç½®`ä¸­çš„`è‰ç¨¿&å‘å¸ƒ`æ ¹æ®å®é™…éœ€è¦è¿›è¡Œå‹¾é€‰ï¼Œå‹¾é€‰ä¹‹åæ–°å¢åŠ çš„æ•°æ®éœ€è¦æ‰‹åŠ¨è¿›è¡Œå‘å¸ƒæ‰èƒ½ç”Ÿæ•ˆã€‚

ç‚¹å‡»`ç»§ç»­`åï¼Œæ·»åŠ å­—æ®µï¼š
![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e706352ca824bed9b6fbf7b49242512~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=829&h=328&s=26888&e=png&b=ffffff)
![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d06b4ba48e4d4f2b92788d2b8eb34fa2~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=832&h=496&s=32918&e=png&b=ffffff)
![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f44c7762da804a38b7ec06fac088d1a4~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=832&h=557&s=36864&e=png&b=ffffff)
![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/63cbd2791f0342c19c4755ce43db578f~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=832&h=493&s=32834&e=png&b=ffffff)
![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1f6c359b4d54776b766057b577aa0a9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=826&h=612&s=44947&e=png&b=ffffff)
![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1b18fe0c50be47808d0c0c999111f53d~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=832&h=351&s=22302&e=png&b=ffffff)
![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/61d78d6644224514a53e8202add987ec~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1451&h=459&s=58148&e=png&b=f5f5fa)

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a919e01ad11432c987e50838b2a7a02~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1492&h=582&s=57761&e=png&b=ffffff)
ä¿å­˜æ•°æ®å¹¶è¿›è¡Œå‘å¸ƒã€‚


## ğŸ“å¯¹å¤–æš´éœ²æ¥å£

### ğŸƒæ— éœ€è®¤è¯å³å¯è¯·æ±‚æ¥å£
æ‰¾åˆ°`è®¾ç½®->ç”¨æˆ·åŠæƒé™æ’ä»¶->è§’è‰²->Public`ï¼Œç‚¹å‡»ç¼–è¾‘æŒ‰é’®ï¼š
![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e55c765c3a9f4f81be14d9aa64dda886~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1911&h=728&s=75110&e=png&b=f6f6f9)

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3537195f31d14175a91e8bd5abe91ac3~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1396&h=823&s=74449&e=png&b=ffffff)

ç‚¹å‡»å³ä¸Šè§’`ä¿å­˜`æŒ‰é’®ï¼Œå³å¯é€šè¿‡`localhost:1337/api/pages`è¯·æ±‚å·²å‘å¸ƒçš„æ•°æ®ï¼Œæˆ–é€šè¿‡`localhost:1337/api/pages/:id`è¯·æ±‚ç‰¹å®šæŸæ¡æ•°æ®ã€‚`get`è¯·æ±‚å¯ç›´æ¥åœ¨æµè§ˆå™¨æ ‡ç­¾é¡µä¸­è¯·æ±‚ï¼š

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9dd2f9dc27bf44238140230d1acc184f~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=731&h=575&s=38631&e=png&b=fcf7f7)



### ğŸƒéœ€è¦è®¤è¯æ‰å¯è¯·æ±‚æ¥å£
é¦–å…ˆè®¾ç½®å“ªäº›æ¥å£éœ€è¦è®¤è¯æ‰å¯è¯·æ±‚ã€‚

æ‰¾åˆ°`è®¾ç½®->ç”¨æˆ·åŠæƒé™æ’ä»¶->è§’è‰²->Authenticated`ï¼Œç‚¹å‡»ç¼–è¾‘æŒ‰é’®ï¼Œå‹¾é€‰å…¨éƒ¨æ¥å£ï¼Œä¿å­˜ã€‚
![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/997b500e984c42bdb2b2052515904186~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1438&h=816&s=65189&e=png&b=ffffff)

#### ğŸˆæ–¹å¼ä¸€
###### 1ã€åˆ›å»ºä»¤ç‰Œ
æ‰¾åˆ°`è®¾ç½®->å…¨å±€è®¾ç½®->APIä»¤ç‰Œ->åˆ›å»ºæ–°çš„APIä»¤ç‰Œ`ï¼Œæˆ‘è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªæ— é™æœŸçš„å®Œå…¨è®¿é—®çš„ä»¤ç‰Œï¼ˆæµ‹è¯•ç”¨ï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸æ¨èï¼‰ï¼š
![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d4487c96772344aa9109cbe0730aaecf~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1433&h=443&s=31537&e=png&b=ffffff)
ä¿å­˜åä¼šç”Ÿæˆä¸€ä¸ªä»¤ç‰Œï¼Œå¤åˆ¶ä»¤ç‰Œï¼Œæ¥ä¸‹æ¥çš„è¯·æ±‚ä¼šéœ€è¦ç”¨åˆ°ã€‚æˆ‘è¿™é‡Œç”¨`TOKEN`æ›¿ä»£ä»¤ç‰Œå†…å®¹ã€‚

###### 2ã€æ¥å£è¯·æ±‚
æˆ‘æ˜¯ä½¿ç”¨æµè§ˆå™¨æ’ä»¶Talend API Testeræ¥æµ‹è¯•çš„ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç”¨postmanç­‰å…¶ä»–å·¥å…·æ¥æµ‹è¯•ã€‚
![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a681928f7c7e44c6a02f8eff9fd89dc9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1556&h=359&s=55167&e=png&b=fefefe)
![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c7b76078b078447fb433c05b1869627a~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1553&h=389&s=46673&e=png&b=fdfdfd)
> è¯·æ±‚å¤´ä¸­å¢åŠ Authorizationï¼Œå€¼ä¸º`Bearer TOKEN`ï¼Œå…¶ä¸­TOKENå°±æ˜¯ä½ åˆ›å»ºAPIä»¤ç‰Œåå¤åˆ¶çš„ä»¤ç‰Œå†…å®¹ã€‚

> é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬çš„ä»¤ç‰Œéƒ½æ˜¯é€šè¿‡æ¥å£è¯·æ±‚çš„ï¼Œè§æ–¹å¼äºŒã€‚ 

#### ğŸˆæ–¹å¼äºŒ
###### 1ã€ä»¤ç‰Œè·å–
* POSTè¯·æ±‚http://host:port/api/auth/local
![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0c179330ee114da3a635f81f20b7d297~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1531&h=400&s=40958&e=png&b=fefefe)
![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6090408de25d48c4b698242c8bdf1edc~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1554&h=264&s=33425&e=png&b=fefefe)

* ä¹Ÿå¯ä½¿ç”¨å‘½ä»¤è¡Œæ–¹å¼ï¼Œæ¯”å¦‚ï¼š
```
// Request
curl --request POST 'localhost:1337/api/auth/local' \
--form 'identifier="test@test.com"' \
--form 'password="test@123"'

// Response
{
    "jwt": TOKEN,
    "user": {
        "id": 3,
        "username": "test",
        "email": "test@test.com",
        ...
    }
}
```

è¿”å›æ•°æ®ä¸­çš„`jwt`å°±æ˜¯ä»¤ç‰Œï¼Œå¯ç”¨äºè¯·æ±‚ä½“ä¸­çš„`Authorization`ã€‚

**ã€æ³¨æ„ã€‘è¯·æ±‚æ•°æ®ä¸­çš„`identifier`å’Œ`password`æ˜¯`å†…å®¹ç®¡ç†å™¨`ä¸­`User`è¡¨ä¸­çš„ç”¨æˆ·æ•°æ®ã€‚**
![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3797473afa284527b173a000b5c97a0d~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=452&h=238&s=12767&e=png&b=f4f4fa)

> å› ä¸ºï¼šauth api only working for normal user, not for users in administrator group(Super admin, editor, author). Strapi have two entirely different user sets for the content API and admin APIs that cannot auth each other.

###### 2ã€æ¥å£è¯·æ±‚
åŒ`æ–¹å¼ä¸€`ä¸­çš„æ¥å£è¯·æ±‚ã€‚
æˆ–è€…ï¼š
```
// Request
curl --request POST 'localhost:1337/api/pages' \
--header 'Authorization: Bearer TOKEN' \
--form 'data={"name": "added from terminal", "description": "terminal"}'

// Response
{"data":{"id":6,"attributes":{"name":"added from terminal","description":"terminal","createdAt":"2024-04-12T12:30:38.530Z","updatedAt":"2024-04-12T12:30:38.530Z","publishedAt":"2024-04-12T12:30:38.528Z"}},"meta":{}}
```


# æ€»ç»“
Strapiä½¿å¼€å‘è€…èƒ½å¤Ÿé€šè¿‡ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„ç•Œé¢æ¥å¿«é€Ÿæ„å»ºä¸€ä¸ªçµæ´»çš„ã€å¯æ‰©å±•çš„APIåç«¯ã€‚